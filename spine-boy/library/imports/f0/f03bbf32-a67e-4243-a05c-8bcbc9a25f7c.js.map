{"version":3,"sources":["../../../../assets/Script/assets/Script/SpineBoy.js"],"names":["cc","Class","extends","Component","properties","spineBoy","sp","Skeleton","onLoad","node","active","initCharacter","eventHandler","check","checkJump","actionRight","moveBy","actionLeft","actionUp","sequence","start","addAnimation","setCompleteListener","Emitter","instance","registerEvent","leftDown","bind","rightDown","upKeyDown","downKeyDown","leftUp","rightUp","upKeyUp","downKeyUp","scaleX","setAnimation","runAction","console","log","stopAction","setToSetupPose","clearTracks"],"mappings":"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","file":"SpineBoy.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import Emitter from 'mEmitter';\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        spineBoy: sp.Skeleton\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        this.node.active = false;\r\n        this.initCharacter();\r\n        this.eventHandler();\r\n\r\n        this.check = true;\r\n        this.checkJump = true;\r\n        this.actionRight = cc.moveBy(10, 3000, 0);\r\n        this.actionLeft = cc.moveBy(10, -3000, 0);\r\n        this.actionUp = cc.sequence(cc.moveBy(0.5, 0, 100), cc.moveBy(0.5, 0, -100));\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    initCharacter() {\r\n        this.node.active = true;\r\n        this.spineBoy.addAnimation(0, 'portal', false);\r\n        this.spineBoy.setCompleteListener(() => {\r\n            this.spineBoy.addAnimation(1, 'idle', true);\r\n        })\r\n    },\r\n    eventHandler() {\r\n        // Emitter.instance = new Emitter();\r\n        Emitter.instance.registerEvent('leftDown', this.leftDown.bind(this));\r\n        Emitter.instance.registerEvent('rightDown', this.rightDown.bind(this));\r\n        Emitter.instance.registerEvent('upKeyDown', this.upKeyDown.bind(this));\r\n        Emitter.instance.registerEvent('downKeyDown', this.downKeyDown.bind(this));\r\n\r\n        Emitter.instance.registerEvent('leftUp', this.leftUp.bind(this));\r\n        Emitter.instance.registerEvent('rightUp', this.rightUp.bind(this));\r\n        Emitter.instance.registerEvent('upKeyUp', this.upKeyUp.bind(this));\r\n        Emitter.instance.registerEvent('downKeyUp', this.downKeyUp.bind(this));\r\n    },\r\n\r\n    leftDown() {\r\n        if (this.check) {\r\n            this.check = false;\r\n            this.node.scaleX = -0.1;\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n            this.node.runAction(this.actionLeft);\r\n        }\r\n    },\r\n    rightDown() {\r\n        if (this.check) {\r\n            this.check = false;\r\n            this.node.scaleX = 0.1;\r\n            // this.spineBoy.clearTracks();\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n            this.node.runAction(this.actionRight);\r\n        }\r\n    },\r\n    upKeyDown() {\r\n        this.spineBoy.setAnimation(1, 'jump', false);\r\n    },\r\n    downKeyDown() {\r\n        console.log('DownKey down');\r\n    },\r\n\r\n    leftUp() {\r\n        this.check = true;\r\n        this.node.stopAction(this.actionLeft);\r\n        this.spineBoy.setToSetupPose(() => {\r\n            this.spineBoy.setAnimation(0, 'idle', true);\r\n        });\r\n    },\r\n    rightUp() {\r\n        this.check = true;\r\n        this.node.stopAction(this.actionRight);\r\n        this.spineBoy.setToSetupPose(() => {\r\n            this.spineBoy.setAnimation(0, 'idle', true);\r\n        });\r\n    },\r\n    upKeyUp() {\r\n        this.spineBoy.setToSetupPose(() => {\r\n            this.spineBoy.clearTracks();\r\n            this.spineBoy.setAnimation(0, 'idle', true);\r\n        });\r\n    },\r\n    downKeyUp() {\r\n        console.log('DownKey up');\r\n    },\r\n\r\n    // update(dt) {},\r\n});\r\n"]}