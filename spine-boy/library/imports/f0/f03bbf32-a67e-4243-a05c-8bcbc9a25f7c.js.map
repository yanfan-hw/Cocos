{"version":3,"sources":["../../../../assets/Script/assets/Script/Player.js"],"names":["direction","isPressKey","cc","Class","extends","Component","properties","spineBoy","sp","Skeleton","onLoad","node","active","initCharacter","eventHandler","actionRight","moveBy","actionLeft","start","addAnimation","setCompleteListener","setAnimation","Emitter","instance","registerEvent","leftDown","bind","rightDown","upKeyDown","downKeyDown","leftUp","rightUp","upKeyUp","downKeyUp","scaleX","runAction","console","log","x","stopAction"],"mappings":"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","file":"Player.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import Emitter from 'mEmitter';\r\n\r\nlet direction = 0, isPressKey = true;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        spineBoy: sp.Skeleton\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        this.node.active = false;\r\n        this.initCharacter();\r\n        this.eventHandler();\r\n\r\n        this.actionRight = cc.moveBy(20, 480, 0);\r\n        this.actionLeft = cc.moveBy(20, -480, 0);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    initCharacter() {\r\n        this.node.active = true;\r\n        this.spineBoy.addAnimation(0, 'portal', false);\r\n        this.spineBoy.setCompleteListener(() => {\r\n            this.spineBoy.setAnimation(0, 'idle', true);\r\n        })\r\n    },\r\n    eventHandler() {\r\n        // Emitter.instance = new Emitter();\r\n        Emitter.instance.registerEvent('leftDown', this.leftDown.bind(this));\r\n        Emitter.instance.registerEvent('rightDown', this.rightDown.bind(this));\r\n        Emitter.instance.registerEvent('upKeyDown', this.upKeyDown.bind(this));\r\n        Emitter.instance.registerEvent('downKeyDown', this.downKeyDown.bind(this));\r\n\r\n        Emitter.instance.registerEvent('leftUp', this.leftUp.bind(this));\r\n        Emitter.instance.registerEvent('rightUp', this.rightUp.bind(this));\r\n        Emitter.instance.registerEvent('upKeyUp', this.upKeyUp.bind(this));\r\n        Emitter.instance.registerEvent('downKeyUp', this.downKeyUp.bind(this));\r\n    },\r\n    leftDown() {\r\n        direction = -1;\r\n        this.node.scaleX = this.node.scaleX * direction;\r\n        if (isPressKey) {\r\n            isPressKey = false;\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n            this.node.runAction(this.actionLeft);\r\n        }\r\n        // cc.log(this.node.x);\r\n    },\r\n    rightDown() {\r\n        direction = 1;\r\n        this.node.scaleX = this.node.scaleX * direction;\r\n        if (isPressKey) {\r\n            isPressKey = false;\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n            this.node.runAction(this.actionLeft);\r\n        }\r\n        // cc.log(this.node.x);\r\n    },\r\n    upKeyDown() {\r\n        console.log('UpKey down');\r\n    },\r\n    downKeyDown() {\r\n        console.log('DownKey down');\r\n    },\r\n\r\n    leftUp() {\r\n        if (this.node.x == - 480) return\r\n        isPressKey = true;\r\n        this.node.stopAction(this.actionLeft);\r\n        // this.node.x -= 0.5;\r\n        // console.log('Left Up');\r\n    },\r\n    rightUp() {\r\n        if (this.node.x == 480) return\r\n        isPressKey = true;\r\n        this.node.stopAction(this.actionRight);\r\n        // this.node.stopAction(this.moveSpineBoy());\r\n        // this.node.x += 0.5;\r\n        // console.log('Right Up');\r\n    },\r\n    upKeyUp() {\r\n        console.log('UpKey up');\r\n    },\r\n    downKeyUp() {\r\n        console.log('DownKey up');\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}