{"version":3,"sources":["SpineBoy.js"],"names":["cc","Class","extends","Component","properties","spineBoy","sp","Skeleton","onLoad","node","active","initCharacter","eventHandler","check","checkJump","actionRight","moveBy","v2","actionLeft","actionUp","sequence","start","addAnimation","Emitter","instance","registerEvent","leftDown","bind","rightDown","upKeyDown","downKeyDown","leftUp","rightUp","upKeyUp","downKeyUp","scaleX","runAction","setAnimation","setCompleteListener","console","log","stopAction"],"mappings":"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","file":"SpineBoy.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import Emitter from 'mEmitter';\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        spineBoy: sp.Skeleton\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        this.node.active = false;\r\n        this.initCharacter();\r\n        this.eventHandler();\r\n\r\n        this.check = true;\r\n        this.checkJump = true;\r\n        this.actionRight = cc.moveBy(10, cc.v2(3000, 0));\r\n        this.actionLeft = cc.moveBy(10, cc.v2(-3000, 0));\r\n        this.actionUp = cc.sequence(cc.moveBy(0.5, 0, 100), cc.moveBy(0.5, 0, -100));\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    initCharacter() {\r\n        this.node.active = true;\r\n        this.spineBoy.addAnimation(0, 'portal', false);\r\n        // this.spineBoy.setCompleteListener(() => {\r\n        //     this.spineBoy.addAnimation(0, 'idle', true);\r\n        // })\r\n    },\r\n    eventHandler() {\r\n        // Emitter.instance = new Emitter();\r\n        Emitter.instance.registerEvent('leftDown', this.leftDown.bind(this));\r\n        Emitter.instance.registerEvent('rightDown', this.rightDown.bind(this));\r\n        Emitter.instance.registerEvent('upKeyDown', this.upKeyDown.bind(this));\r\n        Emitter.instance.registerEvent('downKeyDown', this.downKeyDown.bind(this));\r\n\r\n        Emitter.instance.registerEvent('leftUp', this.leftUp.bind(this));\r\n        Emitter.instance.registerEvent('rightUp', this.rightUp.bind(this));\r\n        Emitter.instance.registerEvent('upKeyUp', this.upKeyUp.bind(this));\r\n        Emitter.instance.registerEvent('downKeyUp', this.downKeyUp.bind(this));\r\n    },\r\n\r\n    leftDown() {\r\n        if (this.check) {\r\n            this.check = false;\r\n            this.node.scaleX = -0.1;\r\n            this.node.runAction(this.actionLeft);\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n        }\r\n    },\r\n    rightDown() {\r\n        if (this.check) {\r\n            this.check = false;\r\n            this.node.scaleX = 0.1;\r\n            this.node.runAction(this.actionRight);\r\n            this.spineBoy.setAnimation(0, 'run', true);\r\n        }\r\n    },\r\n    upKeyDown() {\r\n        if (this.checkJump) {\r\n            this.checkJump = false;\r\n            this.node.runAction(this.actionUp);\r\n            this.spineBoy.setAnimation(0, \"jump\", false);\r\n            this.spineBoy.setCompleteListener(() => {\r\n                this.checkJump = true;\r\n            });\r\n            if (this.check) {\r\n                this.spineBoy.addAnimation(0, \"idle\", true);\r\n            } else {\r\n                this.spineBoy.addAnimation(0, \"run\", true);\r\n            }\r\n        }\r\n        this.spineBoy.setAnimation(0, 'jump', false);\r\n    },\r\n    downKeyDown() {\r\n        console.log('DownKey down');\r\n    },\r\n\r\n    leftUp() {\r\n        this.check = true;\r\n        this.node.stopAction(this.actionLeft);\r\n        this.spineBoy.setAnimation(0, 'idle', true);\r\n    },\r\n    rightUp() {\r\n        this.check = true;\r\n        this.node.stopAction(this.actionRight);\r\n        this.spineBoy.setAnimation(0, 'idle', true);\r\n    },\r\n    upKeyUp() {\r\n        this.node.stopAction(this.actionUp);\r\n        this.spineBoy.setAnimation(0, 'idle', true);\r\n    },\r\n    downKeyUp() {\r\n        console.log('DownKey up');\r\n    },\r\n\r\n    // update(dt) {},\r\n});\r\n"]}